!function($){$(document).ready(function(){function t(){var t=$("#input-field").val().trim();$("#input-field").val(""),$.ajax({type:"POST",url:"php/addItem.php",data:"newItem="+t,cache:!1,success:function(e){e?console.log("test"):($(".uncompleted-item").append($("<li>"+i+t+s+"</li>")),n())},error:function(t){console.log(t)}})}$("input").focus();var e,c=function(t){$(t).toggle()},o=function(t){return e=$(t).length},n=function(){$("#completed").text(o(".completed-item > li")),$("#uncompleted").text(o(".uncompleted-item > li"))};$.fn.toggleSprite=function(t,e){return $(this).css("background-position",function(c,o){return o=o===t?e:t})},$(".toggle-completed").bind("click",function(){$(this).toggleSprite("-82px 50%","-101px 50%"),c(".completed-item")}),$("form").keyup(function(e){13===e.which&&t()});var i='<div class="icon check-box unchecked"></div><span class="item-text">',s='</span><div class="icon trash-can"></div><div class="icon drag-grab"></div>';$("form").submit(function(t){t.preventDefault()}),$(document).on("click",".icon.check-box.unchecked",function(){var t=$(this).closest("li").attr("id").split("_")[1],e=$(this);$.ajax({type:"POST",url:"php/toggleStatus.php",data:{recId:t,status:1},cache:!1,success:function(t){101!=t&&(e.toggleSprite("-1px 50%","-21px 50%").addClass("checked").removeClass("unchecked"),$(".completed-item").prepend(e.closest("li")),n())},error:function(t){console.log("Error: "+t)}})}),$(document).on("click",".icon.check-box.checked",function(){var t=$(this).closest("li").attr("id").split("_")[1],e=$(this);$.ajax({type:"POST",url:"php/toggleStatus.php",data:{recId:t,status:0},cache:!1,success:function(t){console.log(t),101!=t&&(e.toggleSprite("-1px 50%","-21px 50%").addClass("unchecked").removeClass("checked"),$(".uncompleted-item").append(e.closest("li")),n())},error:function(t){console.log("Error: "+result)}})}),$("ul").sortable({axis:"y",update:function(t,e){var c=$(this).sortable("serialize");console.log("test sorted:"+c),$.ajax({data:c,type:"POST",url:"php/sortUpdate.php"})}}),$("ul").on("click",".icon.trash-can",function(){var t=$(this).closest("li").attr("id"),e=$(this);$.ajax({type:"POST",url:"php/deleteItem.php",data:"recId="+t,cache:!1,success:function(t){t&&(e.closest("li").remove(),n())},error:function(t){console.log("error in php")}})});var l=$(".uncompleted-item");$.fn.sortChildren=function(t){var e=this.children();return e.sort(t),this.append(e),this},$(".icon.alpha-sort").click(function(t){$(l).sortChildren(function(t,e){return $(t).find(".item-text").html().toLowerCase()>$(e).find(".item-text").html().toLowerCase()?1:-1})})})}(jQuery);